import tkinter
import requests


tela = tkinter.Tk()
tela.title("Teste")
tela.geometry("450x300")

introducao = tkinter.LabelFrame(
tela,
padx=10,
pady=10

)
introducao.pack(padx=10,fill ="x", pady=10)
label = tkinter.Label(
introducao,
text="Buscador de CEP",
font= ("Arial" ,14)
)
label.pack()


lugar_da_pesquisa = tkinter.LabelFrame(
tela,
padx=10,
text= "Escreva seu cep man",
pady=10


)
lugar_da_pesquisa.pack(padx=10 , fill="x" , pady= 10)
linha = tkinter.Label(lugar_da_pesquisa)
linha.pack()

barra_de_pesquisa = tkinter.Entry(linha , width= 25)
barra_de_pesquisa.pack(side="left",padx=5)

botao_buscar = tkinter.Button(linha,text="Buscar")
botao_buscar.pack(side="left",padx = 10)

botao_apagar = tkinter.Button(linha,text="Apagar")
botao_apagar.pack(side="left",padx = 10)

exibir_resultado = tkinter.LabelFrame(
tela,
padx=10,
text= "Resultado",
pady=10
)
exibir_resultado.pack(padx=10 , fill="x" , pady=10)
resultado = tkinter.Label(exibir_resultado)
resultado.pack()

def efetuar_busca():
    cep= barra_de_pesquisa.get().replace("-","").strip()
    url = f"https://viacep.com.br/ws/{cep}/json"

    try: 
        resp = requests.get(url,timeout =5)
        resp.raise_for_status()
        dados = resp.json()
        if "erro" in dados:
            resultado.config(text= "Cep não encontrado")
        else:
            texto = f"{dados["logradouro"]},{dados["bairro"]},{dados["localidade"]}/{dados["uf"]}"
            resultado.config(text=texto)
    except requests.RequestException:
        resultado.config(text= "Erro na requisição")
        

def efetuar_apaga():
    barra_de_pesquisa.delete(0, tkinter.END)
    resultado.config(text=f"")



botao_buscar.config(command=efetuar_busca)
botao_apagar.config(command=efetuar_apaga)



tela.mainloop()


